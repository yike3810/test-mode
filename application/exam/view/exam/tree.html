<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>组织机构|{:config('system.title')}</title>
    <link rel="stylesheet" type="text/css" href="__CSS__/content.css"  />
    <link rel="stylesheet" type="text/css" href="__CSS__/public.css"  />
    <link rel="stylesheet" type="text/css" href="__STATIC__/layui/css/layui.css"  />
    <script type="text/javascript" src="__JS__/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="__STATIC__/layui/layui.all.js"></script>
</head>
<body>
<div class="layui-fluid">
	<div class="layui-row">
		<div id="tree" class="layui-col-md3"></div>
		<div class="layui-col-md9">
			<table id="demo" lay-filter="test"></table>
		</div>
	</div>
    <script>
    layui.use('tree', function(){
        var tree = layui.tree;
       
        //渲染
        var inst1 = tree.render({
          elem: '#tree',  //绑定元素
          showCheckbox:false,
	      onlyIconControl:true,
		  data:{$service_tree_list},
		  click: function(obj){
			    //console.log(obj.data); //得到当前点击的节点数据
			    //console.log(obj.state); //得到当前节点的展开状态：open、close、normal
			    //console.log(obj.elem); //得到当前节点元素
			    //console.log(obj.data.children); //当前节点下是否有子节点
			  	//obj.data.id
			    layui.use('table', function(){
			    	  var table = layui.table;
			    	  
			    	  //第一个实例
			    	  table.render({
			    	    elem: '#demo'
			    	    ,url: "{:url('Service/getMemberList')}" //数据接口
			    	    ,where:{service_id: obj.data.id}
			    	    ,page: true //开启分页
			    	    ,limit:15
			    	    ,limits:[15,20,30,40,50,60,70,80,90]
			    	    ,cols: [[ //表头
			    	      {field: 'member_id', title: 'ID', width:80,  fixed: 'left'}
			    	      ,{field: 'real_name', title: '真实姓名', width:120}
			    	      ,{field: 'sex', title: '性别', width:80, }
			    	      ,{field: 'phone', title: '手机号码', width:120} 
			    	      ,{field: 'id_number', title: '身份证号码', }
			    	      ,{field: 'member_points', title: '积分', width: 80, }
			    	      ,{field: 'register_time', title: '注册时间', }
			    	      ,{field: 'department_name', title: '部门名称', }
			    	    ]]
			    	  });
			    	  
			    	});
		  }
        });
      });
    layui.use('table', function(){
    	  var table = layui.table;
    	  
    	  //第一个实例
    	  table.render({
    	    elem: '#demo'
    	    ,url: "{:url('Service/getMemberList')}" //数据接口
    	    ,page: true //开启分页
    	    ,limit:15
    	    ,limits:[15,20,30,40,50,60,70,80,90]
    	    ,cols: [[ //表头
    	      {field: 'member_id', title: 'ID', width:80,  fixed: 'left'}
    	      ,{field: 'real_name', title: '真实姓名', width:120}
    	      ,{field: 'sex', title: '性别', width:80, }
    	      ,{field: 'phone', title: '手机号码', width:120} 
    	      ,{field: 'id_number', title: '身份证号码', }
    	      ,{field: 'member_points', title: '积分', width: 80, }
    	      ,{field: 'register_time', title: '注册时间', }
    	      ,{field: 'department_name', title: '部门名称', }
    	    ]]
    	  });
    	  
    	});
    </script>
</div>
</body>
</html>
